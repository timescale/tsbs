#!/usr/bin/env sh
echo "--workers=10 --batch-size=2500"
cat /tmp/bulk_data/clickhouse-data.gz | gunzip | ../../bin/tsbs_load_clickhouse --user="default" --password="" --do-create-db=true --host="localhost" --db-name="benchmark" --workers=10 --batch-size=2500

:<<-EOF
--workers=10 --batch-size=2500
time,per. metric/s,metric total,overall metric/s,per. row/s,row total,overall row/s
1622540337,4052426.37,4.052500E+07,4052426.37,405242.64,4.052500E+06,405242.64
1622540347,3942366.55,7.995000E+07,3997396.03,394236.66,7.995000E+06,399739.60
1622540357,3697568.65,1.169250E+08,3897456.54,369756.86,1.169250E+07,389745.65
1622540367,3399880.46,1.509250E+08,3773060.28,339988.05,1.509250E+07,377306.03
1622540377,3157555.78,1.825000E+08,3649962.81,315755.58,1.825000E+07,364996.28
1622540387,3132544.31,2.138250E+08,3563728.14,313254.43,2.138250E+07,356372.81
1622540397,3472319.91,2.485500E+08,3550669.31,347231.99,2.485500E+07,355066.93
1622540407,3457738.90,2.831250E+08,3539053.84,345773.89,2.831250E+07,353905.38
1622540417,3562350.16,3.187500E+08,3541642.41,356235.02,3.187500E+07,354164.24
1622540427,3472662.66,3.534750E+08,3534744.77,347266.27,3.534750E+07,353474.48
1622540437,3385017.44,3.873250E+08,3521133.28,338501.74,3.873250E+07,352113.33
1622540447,3669104.37,4.240250E+08,3533466.95,366910.44,4.240250E+07,353346.69
1622540457,3723322.64,4.612500E+08,3548067.97,372332.26,4.612500E+07,354806.80
1622540467,3803777.59,4.993000E+08,3566338.35,380377.76,4.993000E+07,356633.84

Summary:
loaded 500000000 metrics in 140.157sec with 10 workers (mean rate 3567438.86 metrics/sec)
loaded 50000000 rows in 140.157sec with 10 workers (mean rate 356743.89 rows/sec)
EOF
